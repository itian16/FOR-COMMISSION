<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Font Awesome Icons-->
        <script src="https://kit.fontawesome.com/efef0daf69.js" crossorigin="anonymous"></script>
        <!-- Font Awesone cdn -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Material Icons -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <!-- Font -->
        <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
        <link href="https://fonts.cdnfonts.com/css/college" rel="stylesheet">
        <link href="https://www.dafontfree.net/embed/emluZy1ydXN0LWRlbW8tYmFzZSZkYXRhLzkxL3ovMTY3NDM4L1ppbmdSdXN0RGVtby1CYXNlLm90Zg" rel="stylesheet" type="text/css"/>
        <link rel="icon" href="SHS-logo.png" type="image/x-icon">
        <link rel="stylesheet" href="MainPage.css">

        <!-- Google Drive API -->
        <script src="https://apis.google.com/js/api.js"></script>

        <!-- Title -->
        <title>𝗢𝘂𝘁𝗽𝘂𝘁 𝗕𝗮𝘀𝗲𝗱 𝗧𝗿𝗮𝗰𝗸𝗲𝗿 & 𝗔𝗰𝗮𝗱𝗲𝗺𝗶𝗰 𝗪𝗼𝗿𝗸 𝗠𝗮𝗻𝗮𝗴𝗲𝗺𝗲𝗻𝘁</title>

    </head>
    <body>
        <!-- NavBar -->
        <nav class="sticky-nav">
            <div class="nav-wrapper" style="background-color: #023B1A">
                <a class="nav-logo" href="MainPage.html" style="margin-left: 30px;">
                   <img src="ImageSources/Web-Logo.png" alt="PinnaCle" width="80px" height="50px" style="margin-top: 5px;">
                </a>
                <a href="" data-target="mobile-demo" class="sidenav-trigger">
                    <i class="fa-solid fa-bars" style="color: #ffffff;"></i>
                </a>
                <ul class="right hide-on-med-and-down" style="margin-right: 5px;">
                    <li>
                        <a href="#About" style="color: #ffffff">About Us
                            <i class="fa-solid fa-circle-info left" style="color: #ffffff;"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#Contact" style="color: #ffffff">
                            Contact
                            <i class="fa-solid fa-phone left" style="color: #ffffff;"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#contact-us" style="color: #ffffff">
                            <i class="fa-solid fa-bars left" style="color: #ffffff;"></i>
                        </a>
                    </li>
                </ul>
        </nav>
        <!-- Extender -->
        <div style="height: 100px;"></div>

        <!-- File upload form -->
        <div class="container">
            <h1>Upload File to Dropbox</h1>
            <input type="file" id="fileInput">
            <button onclick="uploadFile()">Upload</button>
        </div>

        <h1>Files on Dropbox</h1>
        <div id="fileList"></div>

        <script>
            // Dropbox access token
            const DROPBOX_ACCESS_TOKEN = 'sl.BvJZwUni7JjlWsjSqVT1d6n7GsV_hL8fnid567UgVgVTsyvVBPqm34zr1DnjhY9NVL3xgsQlml__TZdLIxNBAwRNph12OeXpOlVHp3Vn0X3mcK6Rnvjk39QsatJQ19BhL0Tb1-GvR4KZ';
        
            // Function to upload file to Dropbox
            async function uploadFile() {
              const fileInput = document.getElementById('fileInput');
              const file = fileInput.files[0];
              if (!file) {
                alert('Please select a file to upload.');
                return;
              }
        
              const formData = new FormData();
              formData.append('file', file);
        
              try {
                const response = await fetch('https://content.dropboxapi.com/2/files/upload', {
                  method: 'POST',
                  headers: {
                    'Authorization': `Bearer ${DROPBOX_ACCESS_TOKEN}`,
                    'Dropbox-API-Arg': JSON.stringify({
                      path: `/${file.name}`,
                      mode: 'add',
                      autorename: true,
                      mute: false,
                    }),
                    'Content-Type': 'application/octet-stream',
                  },
                  body: file,
                });
        
                if (response.ok) {
                  alert('File uploaded successfully!');
                  fetchFiles();
                } else {
                  const data = await response.json();
                  alert(`Error uploading file: ${data.error_summary}`);
                }
              } catch (error) {
                console.error('Error uploading file:', error);
                alert('An error occurred while uploading the file.');
              }
            }
        
            // Function to fetch and display files from Dropbox
            async function fetchFiles() {
              const response = await fetch('https://api.dropboxapi.com/2/files/list_folder', {
                method: 'POST',
                headers: {
                  'Authorization': `Bearer ${DROPBOX_ACCESS_TOKEN}`,
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ path: '' }),
              });
        
              if (response.ok) {
                const data = await response.json();
                const fileList = document.getElementById('fileList');
        
                fileList.innerHTML = ''; // Clear previous file list
        
                data.entries.forEach(entry => {
                  const link = document.createElement('a');
                  link.href = entry.path_lower;
                  link.textContent = entry.name;
                  link.target = '_blank';
                  fileList.appendChild(link);
                  fileList.appendChild(document.createElement('br'));
                });
              } else {
                const data = await response.json();
                alert(`Error fetching files: ${data.error_summary}`);
              }
            }
        
            // Fetch files when the page loads
            fetchFiles();
          </script>

        
        <!-- Extender -->
        <div style="height: 800px;"></div>

        <!-- Footer -->
        <footer id="Contact" class="page-footer" style="background-color: #023B1A">
            <div class="container">
                <div class="row">
                    <div class="col s12 l6 s12"><br>
                        <a href="" class="footer-logo">
                            <img src="ImageSources/Web-Logo.png" alt="logo" class="responsive-img" width="200" height="200">
                        </a>
                        <p style="color: #ffffff; font-size: 20px;">𝐄𝐦𝐚𝐢𝐥: studyflowhub@gmail.com</p>
                        <p style="color: #ffffff; font-size: 20px;">𝐂𝐨𝐧𝐭𝐚𝐜𝐭: (63+) 987-6543-210</p>
                    </div>

                    <!-- Socials -->
                    <br>
                    <div class="col s12 l4 offset-l2 ">
                        <h4 style="color: #ffffff; font-weight: bold;">𝗦𝗢𝗖𝗜𝗔𝗟𝗦</h4>
                        <ul class="left-align">
                            <li> 
                                <a href="" style="font-size: 20px; color: #ffffff">
                                    <i class="fa-brands fa-instagram fa-2xl" style="color: #ffffff"></i>
                                    &nbsp;&nbsp;&nbsp;𝐈𝐧𝐬𝐭𝐚𝐠𝐫𝐚𝐦
                                </a>
                            </li>
                            <p></p>
                            <li> 
                                <a href="" style="font-size: 20px; color: #ffffff">
                                    <i class="fa-brands fa-facebook fa-2xl" style="color: #ffffff"></i>
                                    &nbsp;&nbsp;𝐅𝐚𝐜𝐞𝐛𝐨𝐨𝐤
                                </a>
                            </li>
                            <p></p>
                            <li> 
                                <a href="" style="font-size: 20px; color: #ffffff">
                                    <i class="fa-brands fa-tiktok fa-2xl" style="color: #ffffff"></i>
                                    &nbsp;&nbsp;&nbsp;𝐓𝐢𝐤𝐭𝐨𝐤
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-copyright center">
                <div class="container " style="color: #ffffff; font-size: 20px;">
                <hr>
                   𝗖𝗼𝗽𝘆𝗿𝗶𝗴𝗵𝘁 (𝗰) 𝟮𝟬𝟮𝟰 | @ 𝗦𝘁𝘂𝗱𝘆 𝗙𝗹𝗼𝘄 𝗛𝘂𝗯
                </div>
            </div>
        </footer>


        <!-- jquery cdn -->
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    </body>
</html>